# Linux 文件权限详解

## 用户组

在 linux 中的每个用户必须属于一个组(_每个用户可以属于多个组_)，不能独立于组外。  
在 linux 中每个文件有所有者、所在组、其它组的概念

- 所有者

- 所在组

- 其它组

### 文件所有者

一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者

用`ls ‐ahl` 或 `ll` 命令可以看到文件的所有者

也可以使用`chown 用户名 文件名`来修改文件的所有者

### 文件所在组

当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组

用`ls ‐ahl`命令可以看到文件的所有组

也可以使用`chgrp 组名 文件名`来修改文件所在的组

### 其它组

除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组

## 文件权限

`ls -l`中显示的内容如下：

    -rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc

- 10 个字符确定不同用户能对文件干什么

- 第一个字符代表文件（-）、目录（d），链接（l）

- 其余字符每 3 个一组（rwx），读（r）、写（w）、执行（x）

- 第一组 rwx：文件所有者的权限是读、写和执行, (_文件夹的执行权限就是打开文件夹的权限, 无执行权限则不能 ls 或 cd 该文件夹_)

- 第二组 rw-：与文件所有者同一组的用户的权限是读、写但不能执行

- 第三组 r--：不与文件所有者同组的其他用户的权限是读不能写和执行

也可用数字表示为：r=4，w=2，x=1 因此 rwx=4+2+1=7

- 1 表示连接的文件数

- root 表示用户

- root 表示用户所在的组

- 1213 表示文件大小（字节）

- Feb 2 09:39 表示最后修改日期

- abc 表示文件名

### 改变权限的命令

chmod 改变文件或目录的权限

    chmod 755 abc # 赋予abc权限rwxr-xr-x

    chmod u=rwx，g=rx，o=rx abc # 同上u=用户权限，g=组权限，o=不同组其他用户权限

    chmod u-x，g+w abc # 给abc去除用户执行的权限，增加组写的权限

    chmod a+r abc # 给所有用户添加读的权限

## 改变所有者（chown）和用户组（chgrp）命令

    chown xiaoming abc # 改变abc的所有者为xiaoming

    chown xiaoming:student abc # 同时改变所有者和所属组

    chgrp root abc # 改变abc所属的组为root

    chown root ./abc # 改变abc这个目录的所有者是root

    chown ‐R root ./abc # 改变abc这个目录及其下面所有的文件和目录的所有者是root

## 改变用户所在组

在添加用户时，可以指定将该用户添加到哪个组中，同样用 root 的管理权限可以改变某个用户所在的组

- usermod ‐g 组名 用户名

- usermod ‐d 目录名 用户名，改变该用户登录的初始目录

- groupadd 组名，在 linux 中添加组

- vi /etc/group，查看 linux 中所有组信息，可以看可以编辑

- cat /etc/group，查看 linux 中所有组信息，只可以看不可以编辑

- useradd ‐g 组名 用户名，创建用户的同时指定将该用户分配到哪个组下

- vi /etc/passwd，查看 linux 中所有用户信息，可以看可以编辑

- cat /etc/passwd，查看 linux 中所有用户信息，只可以看不可以编辑
